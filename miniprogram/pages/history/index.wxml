<view class="container">
  <view class="title">最近3次化验记录</view>

  <block wx:for="{{historyData}}" wx:key="plan_id">
    <view class="history-card">
      <view class="info-row">
        <text class="label">化验时间</text>
        <text class="value">{{item.metric_measured_at || '-'}}</text>
      </view>
      <view class="info-row">
        <text class="label">INR凝血指标</text>
        <text class="value">{{item.metric_value || '-'}}</text>
      </view>
      <view class="info-row">
        <text class="label">化验记录上传时间</text>
        <text class="value">{{item.metric_created_at || '-'}}</text>
      </view>
      <view class="info-row">
        <text class="label">医嘱华法林剂量</text>
        <text class="value {{item.status === 'pending' ? 'pending' : ''}}">{{item.suggested_dosage === '-' ? '-' : (item.suggested_dosage === '待医生确认' ? '待医生确认' : item.suggested_dosage + 'mg')}}</text>
      </view>
      <view class="info-row">
        <text class="label">医嘱生效时间</text>
        <text class="value">{{item.plan_updated_at || '-'}}</text>
      </view>
      <view class="info-row">
        <text class="label">状态</text>
        <text class="value {{item.status === 'pending' ? 'pending' : ''}}">{{item.status === 'pending' ? '待处理' : '已处理'}}</text>
      </view>
      <view class="divider"></view>
    </view>
  </block>
</view> 